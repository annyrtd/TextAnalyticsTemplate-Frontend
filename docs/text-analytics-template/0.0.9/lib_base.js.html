<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>lib/base.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AggregatedTable.html">AggregatedTable</a><ul class='methods'><li data-type='method'><a href="AggregatedTable.html#.debounce">debounce</a></li><li data-type='method'><a href="AggregatedTable.html#addToggleButton">addToggleButton</a></li><li data-type='method'><a href="AggregatedTable.html#init">init</a></li></ul></li><li><a href="ConfirmitBase.html">ConfirmitBase</a></li><li><a href="FixedHeader.html">FixedHeader</a><ul class='methods'><li data-type='method'><a href="FixedHeader.html#cloneHeader">cloneHeader</a></li><li data-type='method'><a href="FixedHeader.html#init">init</a></li><li data-type='method'><a href="FixedHeader.html#resizeFixed">resizeFixed</a></li><li data-type='method'><a href="FixedHeader.html#resizeThrottler">resizeThrottler</a></li><li data-type='method'><a href="FixedHeader.html#scrollFixed">scrollFixed</a></li><li data-type='method'><a href="FixedHeader.html#wrapTable">wrapTable</a></li></ul></li><li><a href="HierarchyTable.html">HierarchyTable</a><ul class='methods'><li data-type='method'><a href="HierarchyTable.html#._isNumber">_isNumber</a></li><li data-type='method'><a href="HierarchyTable.html#addCollapseButton">addCollapseButton</a></li><li data-type='method'><a href="HierarchyTable.html#clearLink">clearLink</a></li><li data-type='method'><a href="HierarchyTable.html#init">init</a></li><li data-type='method'><a href="HierarchyTable.html#parseHierarchy">parseHierarchy</a></li><li data-type='method'><a href="HierarchyTable.html#setupMeta">setupMeta</a></li><li data-type='method'><a href="HierarchyTable.html#setupSearch">setupSearch</a></li><li data-type='method'><a href="HierarchyTable.html#toggleHiddenRows">toggleHiddenRows</a></li><li data-type='method'><a href="HierarchyTable.html#updateCategoryLabel">updateCategoryLabel</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#mixin">mixin</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">lib/base.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Created by IvanP on 10.06.2016.
 */

class ConfirmitBase {

  /*allows changing properties with deep nested sub-properties via dotted syntax. Notifies with 'property-changed' event*/
  static update(obj,value){
    console.log('will set '+ obj + ' to ' + value);
    let o=this, first, _prev;
    if(obj.indexOf('.')>0){ // it's a deep property
      var deep = obj.split('.');
      first=deep[0];
      for(var i=0; i&lt;deep.length; i++){
        if(i===0){
          o=o[deep[i]];
          _prev = JSON.parse(JSON.stringify(o));
        } else if(o[deep[i]]){
          if(i&lt;deep.length -1){o=o[deep[i]]} else {
            o[deep[i]] = value;
          }
        } else {console.error('sub-property '+ deep[i] +' doesn\'t exist'); return}
      }
    } else {
      _prev= o[obj];
      first = obj;
      o[obj] = value;
    }
    if(_prev!==this[first]){
      //$(this).trigger({type:first+'-changed', detail:[this[first], _prev]});
    }
  }

  /**
   * Copies props from a source object to a target object.
   *
   * Note, this method uses a simple `for...in` strategy for enumerating
   * properties.  To ensure only `ownProperties` are copied from source
   * to target and that accessor implementations are copied, use `extend`.
   *
   * @method mixin
   * @param {Object} target Target object to copy properties to.
   * @param {Object} source Source object to copy properties from.
   * @return {Object} Target object that was passed as first argument.
   */
  static mixin(target, source) {
    for (var i in source) {
      target[i] = source[i];
    }
    return target;
  }

  static _logger(level, args) {
    // accept ['foo', 'bar'] and [['foo', 'bar']]
    if (args.length === 1 &amp;&amp; Array.isArray(args[0])) {
      args = args[0];
    }
    // only accept logging functions
    switch(level) {
      case 'log':
      case 'warn':
      case 'error':
        console[level].apply(console, args);
        break;
    }
  }

  static _log() {
    var args = Array.prototype.slice.call(arguments, 0);
    this._logger('log', args);
  }

  

  static _warn() {
    var args = Array.prototype.slice.call(arguments, 0);
    this._logger('warn', args);
  }

  static _error() {
    var args = Array.prototype.slice.call(arguments, 0);
    this._logger('error', args);
  }

  static _logf(/* args*/) {
    return this._logPrefix.concat(this.is).concat(Array.prototype.slice.call(arguments, 0));
  }
}

class Confirmit extends ConfirmitBase{
  constructor(prototype){
    console.log(prototype);
    super();


    var factory = prototype;
    if(factory.properties){
      //this.desugarProperties(factory);
    }
    if(factory.options){
      factory = super.mixin(factory,factory.options);
    }
    if(factory.listeners) {
      var host = factory.context;
      for (var eventName in factory.listeners) {
        var node, name;
        if (eventName.indexOf('.') &lt; 0) {
          node = host;
          name = eventName;
        } else {
          name = eventName.split('.');
          node = host.querySelector('#' + name[0]);
          name = name[1];
        }
        //$(node).on(name, host[factory.listeners[eventName]]);
      }
      delete factory.listeners;
    }

    /*initialize the programme*/
    if(factory.init){factory.init()}


  }
  desugarProperties(proto){
    proto._defaultProperties = proto._defaultProperties || {};
    var prop='';
    for(prop in proto.properties){
      if(!(prop in proto)) {
        if (proto.properties[prop].observer) {//property observer
          //$(proto.context).on(prop + '-changed', proto[proto.properties[prop].observer]);
        }
      }
      proto[prop] = proto.properties[prop].value;
    }
    delete proto.properties;
    return proto;
  };
}

export default Confirmit;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Thu Jul 21 2016 18:08:23 GMT+0300 (Russia TZ 2 Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
